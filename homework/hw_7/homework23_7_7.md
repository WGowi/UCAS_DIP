哈尔变换可以用矩阵的形式表示为:
$$
\mathbf{T}=\mathbf{HFH}^{\mathbf{T}}
$$
其中，$F$是一个$N×N$的图像矩阵，$H$是$N×N$变换矩阵，$T$是$N×N$变换结果。对于哈尔变换，变换矩阵H包含基函数$\mathrm{h_k( z) }$,它们定义在连续闭区间$\mathrm{z\in [ 0, 1] , k= 0, 1, 2...N- 1}$,其中$N=2^n$。为了生成矩阵，定义整数$k$，即$\mathrm{k= 2^p+ q- 1}$(这里$0\leq p\leq n-1$,当$p=0$ 时 $q=0$,或$1; $当$p \neq0$时，$1\leq q\leq2^p$)。可得哈尔基函数为：

$$
\mathrm{h_0(z)=h_{00}(z)=\frac1{\sqrt{N}},z\in[0,1]}
$$
 且
$$
\mathrm{h_k( z) = h_{pq}( z) = \frac 1{\sqrt {N}}}\begin{cases} 2^{\frac p2}, ( q- 1) /2^{p}\leq z< ( q- 0.5) /2^{p}\\ - 2^{\frac p2}, ( q- 0.5) /2^{p}\leq z< q/2^{p}\\ 0, \text{其它}，z\in  [0,1]& \end{cases}
$$
$N×N$ 哈尔变换矩阵的第i行包含了元素$\mathrm{h_i( z) }$,其中$\mathrm{z= \frac 0N, \frac 1N, \cdots ( N- 1) /N}$。

计算当$N=16$时



因为$k=2^p+q-1，k\in[0,15]$，可得以下表

| k    | p    | q    |
| ---- | ---- | ---- |
| 0    | 0    | 0    |
| 1    | 0    | 1    |
| 2    | 1    | 1    |
| 3    | 1    | 2    |
| 4    | 2    | 1    |
| 5    | 2    | 2    |
| 6    | 2    | 3    |
| 7    | 2    | 4    |
| 8    | 3    | 1    |
| 9    | 3    | 2    |
| 10   | 3    | 3    |
| 11   | 3    | 4    |
| 12   | 3    | 5    |
| 13   | 3    | 6    |
| 14   | 3    | 7    |
| 15   | 3    | 8    |

![QianJianTec1701360079558](/Users/gowi/Desktop/202312010001655.svg)

